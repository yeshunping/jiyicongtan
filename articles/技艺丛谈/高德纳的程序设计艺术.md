如果要拿到一套计算机书籍来和钱钟书的《管锥编》对比，那么可能就是高德纳的《计算机程序设计艺术》了。高德纳英文名为Donald Ervin Knuth，不过在这套书的前言中他说他喜欢这个中文名，而我也觉得这个名字真是不错，不用加上先生或者教授，使用这样的名字称呼他，本身就带有一种敬意。高德纳，高者世外高手，德者，德高望重，纳者，海纳百川。

大约十二年前，大三左右，我花了差不多一个月的生活费（没记错的话应该是270左右），买了一套三卷本的《计算机程序设计艺术》，原因嘛，除了因为在学校的图书馆找不到这套书外，可能就是炫耀心理作怪吧。这样的心理可能和我几年前买了钱钟书的《管锥编》，而在一段时间后送了一位好朋友一样。当然，那会《管锥编》我要是硬着头皮，应该还能读进去。

不过那会硬着头皮，没能通读高德纳的《计算机程序设计艺术》。之前看过王垠评价过这套书，还是蛮有同感的。这不到原文出处，这里放一个知乎的链接：https://www.zhihu.com/question/20853906/answer/16411249

正如我对文艺名著有迷信，我对计算机的名著也照样有这般情结。之前没看懂，以后可以再读。当然在京十年，搬家不知道多少次了，代价就是多搬砖三块搬了N次。

这里说个故事，当初大四的时候，自己在写毕业论文的时候，没事装逼在参考书籍里写到了TAOCP（《计算机程序设计艺术》的简称，The Art Of Computer Programming 的缩写，为求简便，下文使用TAOCP）。不巧的是，答辩的时候有一位老师提了我问题，说能不能聊下里面提到的随机算法（TAOCP第二卷第三章的主题是随机数），我竟无言以对。在此之后，我就没在工作学习中向别人说过我读过高老头的书。

最近重新开始阅读《计算机程序设计艺术》，渐渐有了一些新的看法。之前读不懂，连说自己看过都不好意思。下面聊聊几个我比较感兴趣的话题。

## 写的最长的书籍

要论起一本书的写作时间之久，恐怕高老头的TAOCP要名列前茅了。曹雪芹写《红楼梦》不过是披阅十载，而高老头的这套书籍，写作时间是1962年，至今已经56年了。并且可以推断出来，目前这套书还没有完全写完。在第三版前言中，高老头提到第一卷的第四版将会是“最后的，光荣的”一版，或许再从现在（也就是1997年）开始的15年内会出版。然而我在网上搜了一遍，目前该书还没有出版。也就是说，基于MMIX汇编语言的版本还没有出现，读者只能暂时读老古董的MIX 语言编写的程序了。

## 使用汇编写 TAOCP 是否明智？

为了给自己一个解释，高老头列出了以下理由，说服读者他使用MIX语言来编写程序是正确的选择。

> 或许许多当今的计算机专家都不同意我使用一种面向机器的语言，然而我已深信，由于下列原因，它肯定是一个正确的选择：
> 1. 程序员在很大程度上受他写程序时所用的语言的影响；有一个压倒性的趋势，就是宁愿使用在语言中最简单的结构，而不会去使用对于机器而言最好的那些东西。通过理解一种面向机器的语言，程序员就将趋向于使用有效得多的方法；这更接近于现实。
> 2. 除去少数例外，我们所要求的程序都是比较短的，因此只要有一台适当的计算机，理解这些程序将毫无麻烦。
> 3. 对于讨论诸如共行程序(coroutine)链接、随机数生成、多精度算术以及涉及存储器的有效使用等许多问题的重要的低级细节而言，高级语言是不适当的。
> 4. 一个真正对计算机感兴趣的人，应当很好地学习机器语言，因为它是一台计算机的基本部分。
> 5. 无论如何，作为在许多例子中叙述的软件程序的输出，某种机器语言将是需要的。  
> 6. 新的代数语言每5年就走红和过时，而我想强调的是永恒的概念。
> 
> 我承认，从其它观点来看，以高级语言来写程序是稍微容易一些的，而且调试程序要更容易。确实，自1970年以来，对于我自己的程序，我也很少使用低级的机器语言，因为计算机是如此之快和如此之强了。然而对于本书中我们感兴趣的许多问题而言，程序员的技巧是至为重要的。例如，某些组合计算需要被重复1万亿次。因此如果我们能从它们的内循环挤出1微秒来，就可以节约出11.6天来。类似地，对于在许多计算机装置中每天要被用上许多次的软件编写来说，作出额外的努力是值得的，因为这个软件只须编写一次。

当然，高老头的理由自有其道理。不过不是很能说服我。下面列几条我的看法。

1. 程序员确实会受到语言的影响。不过反过来说，高老头的MIX也是一种语言。程序的高效应该是去熟悉计算机的硬件能力，以及操作系统，编译器的行为和优化，以及使用的语言背后的实现原理（比如支持的编译器，语言的技术库实现等）。高老头实现了一个“理想”的计算机MIX，并且为此创造了MIXAL汇编语言，这些都是学习成本，虽然在他看来这个学习任务的时间才不多才一个小时。对大部分读者而言，学习一门汇编语言本身就需要不短的时间，何况让他去学习一门在实际中根本就不存在的汇编语言。

2. 另外，MIX的指令集确实古老，在MMIX出现之前，选择汇编来教学给学习带来了不必要的壁垒。假如高老头想要拨开语言的迷雾，完全可以专门花部分章节解释如何看穿编译器的行为，教会读者看明白C语言等高级语言经过编译器生成的指令。学习一门汇编语言的程序员已经不多，何况去学习一门只能使用在TAOCP世界里的汇编语言？也许，使用MIPS， X86，ARM的指令集，读者的接受度会更高一些。

3. “每5年就走红和过时”的语言存在，但是生命之树长青的开发语言也不是没有。比如 C 语言，1972年的时候被创造出来，至今已经46年了。（发明的时间倒是晚于TAOCP的写作时间）。C++ 语言最晚1983年也出现了，到目前也35年了。这两门语言仍然有着蓬勃的生命力。而X86的指令集倒是经常有更新，早期可能才几十个指令，目前早已经超过一千个指令。高老头也许可以选择有限的指令集子集用来教学和示范算法实现。

4. “程序员的技巧是至为重要的”，这句话本身并没有毛病。不过程序优化并不一定需要使用汇编语言。使用汇编语言有时候也不见得比编译器生成的代码高效。原因很简单，术业有专攻，搞编译器开发的人更熟悉各种性能优化技巧，对机器的各种指令集也更熟悉。那如何编译器失效了怎么办？没关系，一般的编译器都支持内嵌汇编代码，关键的代码你完全可以自己使用汇编手写。另外一个事实是，大部分高性能的基础库，绝大部分代码并非汇编实现（当然也有例外）。

## TAOCP 到底是一本什么书？

TAOCP 这么知名，那么到底这本书讲的是什么？ 为什么一本书需要写五六十年？

第1卷 基本算法
第1章 基本概念
第2章 信息结构
第2卷 半数值算法
第3章 随机数
第4章 算术
第3卷 排序与查找
第5章 排序
第6章 查找
第4卷 组合算法
第7章 组合检索
第8章 递归
第5卷 语法算法
第9章 词法扫描
第10章 语法分析

<!--stackedit_data:
eyJoaXN0b3J5IjpbMjI2NTQyNjUyLC0zNzMxMDI2NywxNTg2MD
QwMDg3XX0=
-->